---
import { getQuizStory } from "@components/commonquiz/CommonQuizAmp.astro";
import type { QuizStoryResponse } from "@lib/pojo/responsemodel/QuizStoryResponse";
import QuizAmpRenderer from "@components/commonquiz/QuizAmpRenderer.ts";

const { slug } = Astro.params;
const currentPath = Astro.url.pathname;
const lang = currentPath.startsWith("/en") ? "en" : "ar";

if (!slug) {
  return new Response("Not Found", { status: 404 });
}

const quiz: QuizStoryResponse = await getQuizStory(lang, slug);
if (!quiz) {
  return new Response("Quiz not found", { status: 404 });
}
const response = await QuizAmpRenderer({ quiz, lang });
return response;
---
