---
/**
 * FINAL MULTILINGUAL LANGUAGE SWITCHER FOR ASTRO
 * Auto-detects language from URL
 * Generates correct switch URL for AR <-> EN
 */

const currentPath = Astro.url.pathname;

// Detect current language based on URL
const isHindi = currentPath.startsWith("/en");

// Normalize path (remove /hi and trailing slash)
const normalizePath = (path: string) => {
  const cleaned = path.replace(/^\/en/, "").replace(/\/+$/, "");
  return cleaned === "" ? "/" : cleaned;
};

// Build switch URL
const switchTo = isHindi
  ? normalizePath(currentPath)
  : normalizePath(currentPath) === "/"
      ? "/en"
      : `/en${normalizePath(currentPath)}`;
---

<style>
	.lang-switch {
		background: #f4f4f4;
		padding: 6px 14px;
		border-radius: 8px;
		font-size: 14px;
		text-decoration: none;
		color: #333;
		white-space: nowrap;
		transition: background 0.2s ease;
	}

	.lang-switch:hover {
		background: #e8e8e8;
	}
</style>

<a href={switchTo} class="lang-switch">
	{isHindi ? "English" : "العربية"}
</a>

